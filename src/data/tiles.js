// ═══════════════════════════════════════════════════════════════
// DARK HOLLOWS — TILES & CONSTANTS
// ═══════════════════════════════════════════════════════════════

export const TILE = 40;
export const VIEW_W = 21;
export const VIEW_H = 15;
export const CANVAS_W = VIEW_W * TILE;
export const CANVAS_H = VIEW_H * TILE;
export const PLAYER_SPEED = 2.0;
export const SPRINT_MULT = 1.65;
export const SPRINT_COST = 0.18;
export const STAMINA_REGEN = 0.04;
export const STAMINA_REGEN_IDLE = 0.08;
export const ATTACK_STAM_COST = 12;
export const ATTACK_COOLDOWN = 24;
export const XP_THRESHOLDS = [0,50,120,220,360,550,800,1100,1500,2000,2600,3400,4400,5600,7000,8700,10700,13000,15600,18500];
export const PLAYER_KB = 12;
export const HP_REGEN = 0.012;
export const HP_REGEN_COMBAT_DELAY = 180;

// Tile types
export const T = {
  VOID:0,COBBLE:1,COBBLE_DARK:2,WALL:3,WALL_BROKEN:4,RUBBLE:5,BURNT_WOOD:6,
  ASH:7,BLOOD:8,BLOOD_TRAIL:9,DOOR_BROKEN:10,PILLAR:11,PILLAR_BROKEN:12,
  CATHEDRAL_FLOOR:13,PEW:14,PEW_BROKEN:15,ALTAR:16,STAINED_GLASS:17,
  TORCH_WALL:18,IRON_FENCE:19,COLLAPSED_ROOF:20,CART_WRECK:21,BARREL:22,
  CHAIN:23,STATUE:24,STATUE_BROKEN:25,ARCH:26,CARPET_RED:27,BONE_PILE:28,
  EMBER_GROUND:29,WATER_PUDDLE:30,HANGING_BODY:31,GATE:32,FOUNDATION:33,
  DEBRIS:34,GALLOWS:36,WELL:37,BANNER_TORN:38,WINDOW_BROKEN:39,
  CRATE:40,WEAPON_RACK:41,BLOOD_POOL:42,CANDLE:43,RELIC:44,JAR:45,DOOR_CLOSED:46,
  GRASS:50,GRASS_DARK:51,PATH:52,WOOD_FLOOR:53,MARKET_STALL:54,
  FLOWER:55,HAY:56,FENCE:57,LAMP_POST:58,DOOR:59,ROOF:60,
  CHIMNEY:61,FOUNTAIN:62,WATER:63,COBBLE_CLEAN:64,BANNER:65,
  PLANTER:66,BENCH:67,TREE:68,BUSH:69,WINDOW:70,CARPET:71,
  STATUE_INTACT:72,GARDEN:73,SIGN_POST:74,
  // Forest tiles
  DIRT:75,DENSE_TREE:76,FALLEN_LOG:77,CAMP_FIRE:78,TENT:79,SWAMP:80,MOSS_STONE:81,
  // Cave tiles
  CAVE_FLOOR:82,CAVE_WALL:83,MUSHROOM:84,STALACTITE:85,SPIDER_WEB:86,UNDERGROUND_WATER:87,CRYSTAL:88,
  // Hazard tiles
  SPIKE_TRAP:89,POISON_PUDDLE:90,LAVA:91,ICE:92,FIRE_TRAP:93,
  // Interactive tiles
  LEVER:94,PRESSURE_PLATE:95,TREASURE_CHEST:96,LOCKED_CHEST:97,
  SECRET_WALL:98,CRACKED_WALL:99,BONFIRE:100,
  // Crypt tiles
  CRYPT_FLOOR:101,CRYPT_WALL:102,SARCOPHAGUS:103,TOMB:104,SKULL_PILE:105,
  CRYPT_PILLAR:106,GRAVE:107,COFFIN:108,CRYPT_ALTAR:109,SOUL_FLAME:110,
  // Desert tiles
  SAND:111,SAND_DARK:112,DUNE:113,CACTUS:114,DEAD_TREE:115,OASIS:116,SANDSTONE:117,SANDSTONE_WALL:118,BONES:119,DESERT_ROCK:120,
  // Graveyard tiles  
  GRAVE_DIRT:121,GRAVESTONE:122,MAUSOLEUM:123,DEAD_GRASS:124,CRYPT_ENTRANCE:125,IRON_GATE:126,ANGEL_STATUE:127,WILLOW:128,
  // ═══════════════════════════════════════════════════════════════
  // ICE BIOME TILES (130-145)
  // ═══════════════════════════════════════════════════════════════
  SNOW:130,SNOW_DEEP:131,ICE_FLOOR:132,ICE_WALL:133,FROZEN_TREE:134,
  ICE_CRYSTAL:135,FROST_VENT:136,FROZEN_LAKE:137,SNOW_DRIFT:138,ICE_PILLAR:139,
  FROZEN_CORPSE:140,ICE_STALAGMITE:141,AURORA_STONE:142,FROST_SHRINE:143,
  CRACKED_ICE:144,ICICLE:145,
  // ═══════════════════════════════════════════════════════════════
  // VOLCANIC BIOME TILES (150-165)
  // ═══════════════════════════════════════════════════════════════
  VOLCANIC_ROCK:150,MAGMA:151,OBSIDIAN:152,VOLCANIC_VENT:153,ASH_GROUND:154,
  LAVA_FLOW:155,BASALT:156,FIRE_GEYSER:157,VOLCANIC_GLASS:158,SULFUR_POOL:159,
  CHARRED_BONES:160,EMBER_CRYSTAL:161,FLAME_PILLAR:162,INFERNAL_ALTAR:163,
  COOLED_LAVA:164,SMOKE_VENT:165,
};

// Solid tiles that block movement
export const SOLID = new Set([
  T.VOID,T.WALL,T.WALL_BROKEN,T.PILLAR,T.PILLAR_BROKEN,
  T.IRON_FENCE,T.COLLAPSED_ROOF,T.CART_WRECK,T.BARREL,
  T.STATUE,T.STATUE_BROKEN,T.PEW,T.PEW_BROKEN,
  T.GATE,T.CRATE,T.WEAPON_RACK,T.WELL,T.GALLOWS,
  T.CHAIN,T.HANGING_BODY,T.STAINED_GLASS,T.BANNER_TORN,
  T.FOUNTAIN,T.TREE,T.MARKET_STALL,T.FENCE,T.PLANTER,T.WATER,
  T.CHIMNEY,T.BUSH,T.LAMP_POST,T.STATUE_INTACT,T.SIGN_POST,
  T.DENSE_TREE,T.FALLEN_LOG,T.TENT,T.CAVE_WALL,T.STALACTITE,T.UNDERGROUND_WATER,
  T.WINDOW,T.WINDOW_BROKEN,T.ALTAR,T.JAR,T.DOOR_CLOSED,T.TORCH_WALL,
  T.TREASURE_CHEST,T.LOCKED_CHEST,T.BONFIRE,
  T.CRYPT_WALL,T.SARCOPHAGUS,T.TOMB,T.CRYPT_PILLAR,T.COFFIN,T.CRYPT_ALTAR,
  T.DUNE,T.CACTUS,T.DEAD_TREE,T.SANDSTONE_WALL,T.DESERT_ROCK,
  T.GRAVESTONE,T.MAUSOLEUM,T.IRON_GATE,T.ANGEL_STATUE,T.WILLOW,
  // Ice biome solids
  T.ICE_WALL,T.FROZEN_TREE,T.ICE_PILLAR,T.ICE_STALAGMITE,T.ICICLE,T.FROZEN_LAKE,
  // Volcanic biome solids
  T.OBSIDIAN,T.MAGMA,T.LAVA_FLOW,T.FLAME_PILLAR,T.SULFUR_POOL,
]);

// Hazard tiles - cause damage/effects when stepped on
export const HAZARD_TILES = {
  [T.SPIKE_TRAP]: { dmg: 15, type: "physical" },
  [T.POISON_PUDDLE]: { dmg: 1, type: "poison", effect: "poison", duration: 3600 },
  [T.LAVA]: { dmg: 8, type: "fire", effect: "burn", duration: 180 },
  [T.FIRE_TRAP]: { dmg: 20, type: "fire" },
  // Ice biome hazards
  [T.FROST_VENT]: { dmg: 5, type: "cold", effect: "freeze", duration: 120 },
  [T.CRACKED_ICE]: { dmg: 10, type: "cold", breakChance: 0.3 },
  // Volcanic biome hazards
  [T.MAGMA]: { dmg: 12, type: "fire", effect: "burn", duration: 180 },
  [T.LAVA_FLOW]: { dmg: 15, type: "fire", effect: "burn", duration: 240 },
  [T.FIRE_GEYSER]: { dmg: 20, type: "fire", interval: 180 },
  [T.VOLCANIC_VENT]: { dmg: 8, type: "fire", effect: "burn", duration: 120 },
};

// Slippery tiles (player slides)
export const SLIPPERY = new Set([T.ICE,T.ICE_FLOOR,T.FROZEN_LAKE,T.CRACKED_ICE]);

// Light sources per zone
export const LIGHT_SOURCES_RUIN = new Set([T.TORCH_WALL, T.CANDLE, T.EMBER_GROUND, T.BONFIRE]);
export const LIGHT_SOURCES_FOREST = new Set([T.CAMP_FIRE, T.LAMP_POST, T.CANDLE, T.BONFIRE]);
export const LIGHT_SOURCES_CAVE = new Set([T.TORCH_WALL, T.CANDLE, T.MUSHROOM, T.CRYSTAL, T.BONFIRE]);
export const LIGHT_SOURCES_CRYPT = new Set([T.TORCH_WALL, T.CANDLE, T.SOUL_FLAME, T.BONFIRE]);
export const LIGHT_SOURCES_DESERT = new Set([T.TORCH_WALL, T.BONFIRE, T.OASIS]);
export const LIGHT_SOURCES_GRAVEYARD = new Set([T.TORCH_WALL, T.CANDLE, T.SOUL_FLAME, T.BONFIRE]);
export const LIGHT_SOURCES_ICE = new Set([T.TORCH_WALL, T.BONFIRE, T.ICE_CRYSTAL, T.AURORA_STONE, T.FROST_SHRINE]);
export const LIGHT_SOURCES_VOLCANIC = new Set([T.TORCH_WALL, T.BONFIRE, T.MAGMA, T.LAVA_FLOW, T.FIRE_GEYSER, T.EMBER_CRYSTAL, T.FLAME_PILLAR, T.VOLCANIC_VENT]);

// Tile colors for rendering and minimap
export const TILE_COLORS = {
  [T.VOID]:"#050508",[T.COBBLE]:"#252018",[T.COBBLE_DARK]:"#1c1812",
  [T.WALL]:"#1a1520",[T.WALL_BROKEN]:"#181320",[T.RUBBLE]:"#1c1818",
  [T.BURNT_WOOD]:"#151010",[T.ASH]:"#1c1812",[T.BLOOD]:"#1c1812",
  [T.BLOOD_TRAIL]:"#1c1812",[T.BLOOD_POOL]:"#1c1812",
  [T.DOOR_BROKEN]:"#1c1812",[T.PILLAR]:"#1c1820",
  [T.PILLAR_BROKEN]:"#1c1812",[T.CATHEDRAL_FLOOR]:"#1a1825",
  [T.PEW]:"#1a1825",[T.PEW_BROKEN]:"#1a1825",[T.ALTAR]:"#1a1828",
  [T.STAINED_GLASS]:"#1a1520",[T.TORCH_WALL]:"#1a1520",
  [T.IRON_FENCE]:"#1c1812",[T.COLLAPSED_ROOF]:"#141018",
  [T.CART_WRECK]:"#1c1812",[T.BARREL]:"#1c1812",
  [T.CHAIN]:"#1c1812",[T.STATUE]:"#1c1820",
  [T.STATUE_BROKEN]:"#1c1812",[T.ARCH]:"#1c1820",
  [T.CARPET_RED]:"#1a1825",[T.BONE_PILE]:"#1c1812",
  [T.EMBER_GROUND]:"#1c1812",[T.WATER_PUDDLE]:"#1c1812",
  [T.HANGING_BODY]:"#1c1812",[T.GALLOWS]:"#1c1812",
  [T.WELL]:"#1c1820",[T.BANNER_TORN]:"#1c1812",
  [T.WINDOW_BROKEN]:"#1a1520",[T.CRATE]:"#1c1812",
  [T.WEAPON_RACK]:"#1c1812",[T.CANDLE]:"#1a1825",
  [T.DEBRIS]:"#1c1812",[T.FOUNDATION]:"#1c1820",[T.RELIC]:"#1a1828",
  [T.GRASS]:"#2a5420",[T.GRASS_DARK]:"#1e4018",[T.PATH]:"#8a7a60",
  [T.WOOD_FLOOR]:"#5a4830",[T.MARKET_STALL]:"#6a4a28",
  [T.FLOWER]:"#2a5420",[T.HAY]:"#8a7a40",[T.FENCE]:"#5a4428",
  [T.LAMP_POST]:"#2a5420",[T.DOOR]:"#5a3a1a",[T.ROOF]:"#6a3020",
  [T.CHIMNEY]:"#3a3040",[T.FOUNTAIN]:"#3a5a6a",[T.WATER]:"#1a3a50",
  [T.COBBLE_CLEAN]:"#7a7060",[T.BANNER]:"#8a2020",[T.PLANTER]:"#3a5a28",
  [T.BENCH]:"#5a4428",[T.TREE]:"#1a3812",[T.BUSH]:"#2a4a1a",
  [T.WINDOW]:"#3a5a7a",[T.CARPET]:"#6a3040",
  [T.STATUE_INTACT]:"#5a5868",[T.SIGN_POST]:"#5a4428",
  // Forest
  [T.DIRT]:"#4a3a20",[T.DENSE_TREE]:"#0a2808",[T.FALLEN_LOG]:"#3a2a14",
  [T.CAMP_FIRE]:"#4a3a20",[T.TENT]:"#5a4a30",[T.SWAMP]:"#1a3a18",
  [T.MOSS_STONE]:"#2a3a28",
  // Cave
  [T.CAVE_FLOOR]:"#1a1820",[T.CAVE_WALL]:"#0c0a10",[T.MUSHROOM]:"#1a1820",
  [T.STALACTITE]:"#0c0a10",[T.SPIDER_WEB]:"#1a1820",[T.UNDERGROUND_WATER]:"#0a1828",
  [T.CRYSTAL]:"#1a1820",
  // Desert
  [T.SAND]:"#c4a868",[T.SAND_DARK]:"#a89050",[T.DUNE]:"#d4b878",[T.CACTUS]:"#3a6a28",
  [T.DEAD_TREE]:"#4a3820",[T.OASIS]:"#2a6a70",[T.SANDSTONE]:"#b89860",[T.SANDSTONE_WALL]:"#8a7048",
  [T.BONES]:"#c8c0a8",[T.DESERT_ROCK]:"#6a5a48",
  // Graveyard
  [T.GRAVE_DIRT]:"#3a3028",[T.GRAVESTONE]:"#5a5860",[T.MAUSOLEUM]:"#4a4850",
  [T.DEAD_GRASS]:"#4a4830",[T.CRYPT_ENTRANCE]:"#1a1820",[T.IRON_GATE]:"#3a3840",
  [T.ANGEL_STATUE]:"#8a8890",[T.WILLOW]:"#2a3a20",
  // Crypt
  [T.CRYPT_FLOOR]:"#181820",[T.CRYPT_WALL]:"#101018",[T.SARCOPHAGUS]:"#2a2830",
  [T.TOMB]:"#202028",[T.SKULL_PILE]:"#3a3830",[T.CRYPT_PILLAR]:"#252530",
  [T.GRAVE]:"#1a1a20",[T.COFFIN]:"#2a2028",[T.CRYPT_ALTAR]:"#2a2838",
  [T.SOUL_FLAME]:"#182030",
  // ═══════════════════════════════════════════════════════════════
  // ICE BIOME COLORS
  // ═══════════════════════════════════════════════════════════════
  [T.SNOW]:"#e8f0f8",[T.SNOW_DEEP]:"#d0e0f0",[T.ICE_FLOOR]:"#a0d0e8",
  [T.ICE_WALL]:"#6090b0",[T.FROZEN_TREE]:"#4a6878",[T.ICE_CRYSTAL]:"#80c0e0",
  [T.FROST_VENT]:"#b0d8f0",[T.FROZEN_LAKE]:"#5088a8",[T.SNOW_DRIFT]:"#f0f8ff",
  [T.ICE_PILLAR]:"#7ab0d0",[T.FROZEN_CORPSE]:"#8090a0",[T.ICE_STALAGMITE]:"#6898b8",
  [T.AURORA_STONE]:"#60d0a0",[T.FROST_SHRINE]:"#90c8e8",[T.CRACKED_ICE]:"#88b8d0",
  [T.ICICLE]:"#a8d8f0",
  // ═══════════════════════════════════════════════════════════════
  // VOLCANIC BIOME COLORS
  // ═══════════════════════════════════════════════════════════════
  [T.VOLCANIC_ROCK]:"#2a2028",[T.MAGMA]:"#ff4020",[T.OBSIDIAN]:"#101018",
  [T.VOLCANIC_VENT]:"#3a2020",[T.ASH_GROUND]:"#3a3838",[T.LAVA_FLOW]:"#ff6030",
  [T.BASALT]:"#282830",[T.FIRE_GEYSER]:"#ff8040",[T.VOLCANIC_GLASS]:"#181820",
  [T.SULFUR_POOL]:"#a0a020",[T.CHARRED_BONES]:"#2a2828",[T.EMBER_CRYSTAL]:"#ff5030",
  [T.FLAME_PILLAR]:"#ff4010",[T.INFERNAL_ALTAR]:"#4a2028",[T.COOLED_LAVA]:"#383038",
  [T.SMOKE_VENT]:"#484850",
};

export function getTileColor(t) {
  return TILE_COLORS[t] || "#0a0a0f";
}
